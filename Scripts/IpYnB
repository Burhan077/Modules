#!/bin/zsh

# -------- USER INPUT --------
echo -n "ğŸ“ Enter the full path to the folder containing .py files: "
read source_dir

# -------- DESTINATION --------
target_dir="~/Python/Ipynb"

# -------- REQUIREMENT CHECKS --------
if ! command -v jupytext &> /dev/null; then
  echo "âŒ jupytext not found! Run: pip install jupytext"
  exit 1
fi

if [[ ! -d "$source_dir" ]]; then
  echo "âŒ That directory doesn't exist: $source_dir"
  exit 1
fi

# -------- MAKE TARGET DIR IF MISSING --------
echo "ğŸ“ Ensuring target directory exists: $target_dir"
mkdir -p "$target_dir"

# -------- COPY .py FILES --------
echo "ğŸ“¦ Copying .py files to $target_dir ..."
cp "$source_dir"/*.py "$target_dir"

# -------- CONVERT TO .ipynb --------
echo "ğŸ” Converting copied files to .ipynb ..."
for py_file in "$target_dir"/*.py; do
  jupytext --to notebook "$py_file"
  echo "âœ… Converted: $(basename "$py_file") â†’ $(basename "$py_file" .py).ipynb"
done

# -------- REMOVE COPIED .py FILES --------
echo "ğŸ§¹ Cleaning up .py files from $target_dir ..."
rm "$target_dir"/*.py

echo "ğŸ‰ All done! Only .ipynb files remain in: $target_dir"

