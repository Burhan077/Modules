# /mod/lib/initp

if [[ -z "${INITP_PATH_ADDED+x}" ]]; then
  export INITP_PATH_ADDED=1

  add_exec_dirs_to_path() {
    local base_dir=$1
    [ -d "$base_dir" ] || return

    for dir in $(find "$base_dir" -type d); do
      if find "$dir" -maxdepth 1 -type f -perm /111 | grep -q .; then
        case ":$PATH:" in
          *":$dir:"*) ;;
          *) PATH="$dir:$PATH" ;;
        esac
      fi
    done
  }

  add_exec_dirs_to_path "/mod"
  export PATH
fi

